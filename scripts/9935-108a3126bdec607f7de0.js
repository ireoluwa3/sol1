(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9935],{7810:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var o=n(3320),r=n(1956),i=n(1971),a=n(8073),s=n(3608);let c;const l={logLevel:"localhost:3000"===window.location.host?"debug":"error",protocol:"actioncable-v1-protobuf",encoder:new i.a};class u{#t;constructor(t,e){const n={websocketUrl:(0,a.b8)(),cable:void 0,channelName:null,debug:!1};void 0===e&&logger.error("ActionCableObserver switcher is not defined: ",this.config.channelId),this.#t=e,this.config={...n,...t};let i=this.config.channelName;if(this.channel={channel:i,id:this.config.channelId},this.observers=[],this.#t){if(this.config.cable)this.cable=this.config.cable;else{if(!c){this.logger("INIT CABLE: ",this.config.channelName);const t=s.A.get("ta_debug"),e=t?r.Be:o.Be,n=t?void 0:l;c=e(this.config.websocketUrl,n)}this.cable=c}this.cable.subscriptions.create(this.channel,{connected:()=>{this.logger("CONNECTED: ",this.config.channelName),this.config.onConnect&&this.config.onConnect()},disconnected:()=>{this.logger("DISCONNECTED: ",this.config.channelName)},received:t=>{this.logger(`received ${this.config.channelName}`,t),this.broadcast(t)},rejected:()=>{this.logger("REJECTED: ",this.config.channelName)}})}else this.logger(`${this.config.channelName} is disabled`)}logger(...t){this.config.debug&&logger.log(...t)}subscribe(t){this.#t&&this.observers.push(t)}unsubscribe(t){this.#t&&(this.observers=this.observers.filter((e=>e!==t)))}broadcast(t){this.#t&&this.observers.forEach((e=>e(t)))}}},6145:function(t,e,n){"use strict";n.d(e,{Dy:function(){return b},R_:function(){return y},Xx:function(){return w}});var o=n(7810),r=n(1580),i=n(8073),a=n(3435),s=n(5479),c=n.n(s),l=n(37),u=n.n(l),d=(n(7983),n(707));let f={};window.finishedTasks=f;const h=t=>{if(!t.data)return;const e=c()(".js-task-table");if(!e.length)return;const{purchases:n=[]}=t.data;n.forEach((t=>{if(!t.id||"auto"!==t.kind)return;const n=e.find(`.js-task-table__row[data-id="${t.id}"]`),o=c()((({symbol:t,address:e,status:n="",amount:o,txHash:a,poolId:s,id:c})=>{const l="executing"===n?"active":n;return`\n    <div class="c-task-table__tr js-task-table__row" data-id="${c}">\n      <div class="c-task-table__td u-color-primary-ltr">\n        <a href="${s?(0,r.VV)(null,s):`${(0,i.o1)()}/account/${e}`}" target="_blank">\n          ${t||(0,r.Wr)(e)||""}\n        </a>\n      </div>\n\n      <div class="c-task-table__td u-d-flex u-align-content-center u-color-light-alt">\n        <span class="c-icon c-icon--base c-icon--net-symbol u-mr-xxs"></span>\n        ${o?(0,r.M2)(o,5):0}\n      </div>\n\n      <div class="c-task-table__td u-d-flex u-justify-content-between u-align-content-center" data-status="${l}">\n        ${l}\n        <div class="l-row l-row-gap--s u-align-content-center">\n          <div class="l-col-auto">\n            ${a?`\n                <a href="${(0,i.o1)()}/tx/${a}" target="_blank">\n                  <span class="c-icon c-icon--solscan c-task-table__icon"></span>\n                </a>\n              `:'<span class="c-icon c-icon--solscan is-disabled c-task-table__icon"></span>'}\n          </div>\n\n\n          <div class="l-col-auto">\n            <span class="c-icon c-icon--trash c-task-table__icon js-task-table__remove" data-id="${c}"></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  `})(t));n.length&&n.replaceWith(o)}))};async function p(t=3){let e,n;const o=c()(".js-generated-balance").text();if(t<=0)[e,n]=await(0,r.MK)();else{(0,i.cq)()&&([e,n]=await(0,r.MK)())}t>0&&e&&o&&parseFloat(o)==e?setTimeout((function(){p(t-1)}),1500):`${e}`&&((0,i.CI)({showQuoteBalance:e}),c()(".js-generated-balance").html(e))}window.updateEthBalance=p;const m=async t=>{const e=await fetch(`/api/lp/refresh_p_l?pool_id=${t}`,{cache:"no-store"}).then((t=>t.json()));return e&&e.plObj&&((0,r.IZ)(e.plObj,null,!0),c()("#js-token-show-portfolio").removeClass("is-hidden")),!0},g=async t=>{if(!t||!t.id)return;const e=f[t.id];if(!0===e)return;"number"===typeof e?(f[t.id]=!0,clearTimeout(e)):f[t.id]=!0;const n=`${t.pool_id}`==(0,i.Lx)(),{status:o,txHash:s,symbol:l,amount:h,amountIn:m,amountOut:g,dir:w,privateNode:b,errorMsg:y,token_amount:v,token_decimals:$,id:_,generatedWallet:x,address:k}=t,j=document.querySelector(`.iziToast.flash-${_}`);if(j&&u().hide({transitionOut:"fadeOutUp"},j),"success"===o){let e=function({dir:t,symbol:e,amount:n,amountIn:o,amountOut:i,token_amount:a,generatedWallet:s}){let c="";if(["sell","buy"].includes(t)&&s){c=`${window._genWallets?.find((({generated_wallet:t})=>t===s))?.name||(0,r.Wr)(s)} - `}if("sell"===t){let t;return i&&(t=(0,r.aI)(parseFloat((i/Math.pow(10,r.Iq)).toFixed(8)).toString())),t?i18n.t("notification.success_sold_with_val",{amt:t,symbol:e,prefix:c}):i18n.t("notification.success_sold_without_val",{symbol:e,prefix:c})}if("buy"===t){let t;return o?t=(0,r.aI)(parseFloat((o/Math.pow(10,r.Iq)).toFixed(8)).toString()):n&&(t=(0,r.aI)(parseFloat(n.toFixed(8)).toString())),t?i18n.t("notification.success_bought_with_val",{amt:t,symbol:e,prefix:c}):i18n.t("notification.success_bought_without_val",{symbol:e,prefix:c})}if("deposit"===t)return i18n.t("notification.success_deposit",{amount:n});if("withdraw"===t)return i18n.t("notification.success_withdraw",{amount:n});return i18n.t("notification.success_transaction")}({dir:w,symbol:l,amount:h,amountIn:m,amountOut:g,token_amount:v,generatedWallet:x});if((0,a.ag)({id:_,timeout:3e3,closeOnClick:!1,message:s?`<a href="${(0,i.o1)()}/tx/${s}" target="_blank">${e}</a>`:e}),["buy","sell","deposit","withdraw"].indexOf(w)>=0&&setTimeout((()=>{try{p(3)}catch(t){logger.log("Balance update failed",t)}}),2e3),n&&["buy","sell"].indexOf(w)>=0){let e=parseInt((0,i.Oy)());if(e+=1,(0,i.CI)({showPurchasesCount:String(e)}),c()(document).trigger("datafeed:confirm",{type:"confirm",item:t}),c()(".js-tabs__content .js-sell-first-option").each((function(){const t=c()(this).closest(".js-tabs__content"),n=t.find(".js-wdd"),o=t.find(".js-sell-first-option"),i=n[0]._walletsDropdown.getSelectedAddresses(),{investedEth:a}=(0,d.pw)(i);1===e&&a>0&&i.length<=1?o.attr("data-value","initial").find(".js-price-form__btn__label").text("initial"):o.each((function(){const t=c()(this).attr("data-preset");if((0,r.gD)(t))return;const e=window.gasSettings.buy_sell_amts[`preset${t}`].sell[0];c()(this).attr("data-value",`${e}`).find(".js-price-form__btn__label").text(`${e}%`)}))})),(0,i.Lx)()){const t=(0,d.ZH)();t&&await t.fetchPL((0,i.Lx)(),x),await(0,r.m5)({tokenAddress:k,tokenDecimals:$,wallets:x})}}}else if("failed"===o){let t,e=function({dir:t,symbol:e,errorMsg:n,privateNode:o,amount:i,txHash:a,generatedWallet:s}){let c="",l="";if(["sell","buy"].includes(t)&&s){l=`${window._genWallets?.find((({generated_wallet:t})=>t===s))?.name||(0,r.Wr)(s)} - `}let u={};if("deposit"===t)return{msgTxt:i18n.t("notification.deposit_failed",{amount:i}),data:u};if("withdraw"===t)return{msgTxt:i18n.t("notification.withdraw_failed",{amount:i}),data:u};n&&(n.indexOf("frozen")>=0?c=" Account frozen by dev":n.indexOf("insufficient")>=0?c=" Insufficient fund":(n.indexOf("slippage")>=0||n.indexOf("Slippage")>=0)&&(c=" Exceeds desired slippage limit"));if(e)return{msgTxt:i18n.t("notification.tr_fail",{symbol:e,reason:c,prefix:l}),data:u};if(n)return{msgTxt:`${l}${n}`,data:u};return{msgTxt:i18n.t("notification.error"),data:u}}({dir:w,symbol:l,errorMsg:y,privateNode:b,amount:h,txHash:s,generatedWallet:x}),{msgTxt:n,data:o}={...e};o&&o.insufficientGasDetails&&o.insufficientGasDetails.tx_cost?(t="/en/wallets?tab=1",n=`<div class="u-lh-normal">\n                    <div class="u-mb-xxs" >${n}</div>\n\n                    <table class="u-m-0">\n                      <tr>\n                        <td>${i18n.t("notification.tx_val_with_gas")}</td>\n                        <td class="u-pl-xxs">${o.insufficientGasDetails.tx_cost} SOL</td>\n                      </tr>\n                      <tr>\n                        <td>${i18n.t("notification.wallet_balance")}</td>\n                        <td class="u-pl-xxs">${o.insufficientGasDetails.balance} SOL</td>\n                      </tr>\n                      <tr>\n                        <td>${i18n.t("notification.still_require")}</td>\n                        <td class="u-pl-xxs">${o.insufficientGasDetails.overshot} SOL</td>\n                      </tr>\n                    </table>\n\n                    <div class="u-mt-xxs"><b>${i18n.t("notification.deposit_more_eth")}.</b></div>\n                  </div>\n                  `):!b&&s&&(t=`${(0,i.o1)()}/tx/${s}`),(0,a.F8)({id:_,timeout:3e3,closeOnClick:!0,message:t?`<a href="${t}" target="_blank">${n}</a>`:n})}c()(document).trigger("purchase:receiveEvent",[{data:t}])};const w=async(t,{onFinished:e,onFailed:n,onSuccess:o}={})=>{try{if(!t)return;async function i(t,r){if(r>2)return;const a=await fetch(`/api/users/recheck_st?id=${t}`,{method:"GET",cache:"no-store"}).then((t=>t.json()));return a&&a.task&&["success","failed"].includes(a.task.status)&&!0!==f[a.task.id]?(g(a.task),e&&e(a.task),"success"===a.task.status&&o&&o(a.task),"failed"===a.task.status&&n&&n(a.task)):f[t]=setTimeout((async function(){await i(t,r+1)}),5e3),a}f[t]=setTimeout((async function(){await i(t,0)}),5e3)}catch(r){console.error(r)}},b=(t,{timeoutMsg:e}={})=>{if(t.ignored)return;let n=t.ids;n||(0,r.gD)(t.id)||(n=[t.id]);let o=t.successWallets||{};n.forEach((t=>{let n=o[t],i="";if(n){i=`${window._genWallets?.find((({generated_wallet:t})=>t===n))?.name||(0,r.Wr)(n)} - `}(0,a.OA)({message:i18n.t("tr_executing",{prefix:i}),id:t,timeout:e||r.hj}),w(t)})),t.failedWallets&&t.failedWallets.length>0&&(0,r.Xe)(t.failedWallets)};window.TxSuccessCallback=b,window.watchTxProcess=w;const y=t=>(window._userChannel||(window._userChannel=window._userChannel||new o.A({channelId:t,channelName:"UsersChannel"},(0,i.gL)())),window._userChannel);e.Ay=({id:t,type:e})=>{if(window._userChannel)return window._userChannel;const n=y(t);return window._userChannel=n,n.subscribe(((t={})=>{if((0,i.Lx)()&&t.portfolioNew?.data?.poolId===(0,i.Lx)()&&c()(document).trigger("portfolio:fetchPL",[{poolId:(0,i.Lx)()}]),"dashboard"===e&&h(t),"show"===e&&(t=>{if(!t.data)return;const{watch:e=[]}=t.data,n=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),o=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0});e.forEach((async t=>{let e=t.poolId,i=t.fiveMChange,a=c()(`.js-watch-token[data-pool-id=${e}]`);if(a){let e,s;if(isNaN(parseFloat(i)))e="",i="N/A";else if(0==parseFloat(i))e="";else{let t="";parseFloat(i)>0&&(t="+"),i=i>1e3?o.format(i/100):n.format(i/100),i=`${t}${i}`,e=parseFloat(i)>0?"u-color-green":"u-color-red"}s=isNaN(parseFloat(t.mktCap))?"N/A":(0,r.gp)({numb:t.mktCap,fractionLength:2,unit:"$"}),a.find(".js-mktcap-watch").text(s);let c=a.find("span.js-fivem-watch");c.removeClass("u-color-green u-color-red").addClass(e),c.text(i)}}))})(t),t&&t.refresh_holdings)(async t=>{if(!t.data)return;const e=t.data||[],n=(0,i.Lx)();if(n)for(let o=0;o<e.length;o++){const t=e[o];if(t&&t.id&&`${t.pool_id}`==n){await m(n);break}}})(t.refresh_holdings);else if(t&&t.portfolio_cleaning&&window.location.pathname.indexOf("my_holdings")>=0)c()(".js-cleaning-progress-warning").addClass("is-hidden");else if((async t=>{if(!t.data)return;const{purchases:e=[]}=t.data;for(let n=0;n<e.length;n++)await g(e[n])})(t),((t={})=>{const{genNotification:e}=t;if(!e)return;let{action:n,msg:o,variables:i}=e;const a=c()(".js-top-banner");if("show"===n){if(!(0,r.gD)(o)){if(i)for(let[t,e]of Object.entries(i)){if("timestamp"===t){let t=new Date(1e3*e);e=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}o=o.replaceAll(`{${t}}`,e)}a.html(o)}a.removeClass("is-hidden")}else"hide"===n&&a.addClass("is-hidden")})(t),((t={})=>{const{alertNotif:e}=t;e&&e.data&&e.data.forEach((t=>{let{content:e,timeout:n,url:o,icon_color:r,icon:i,img:s,id:c,handle:l}=t;(0,a.Th)({alertId:c,iconPosition:"session"===l?"center":"",message:e,link:o,icon:i,iconColor:r,img:s,timeout:n})}))})(t),(t=>{t.orders&&t.orders.data&&t.orders.data.forEach((t=>{if(t.attributes&&"executing"===t.attributes.status){let e;switch(t.attributes.kind){case"take_profit":e=`${i18n.t("take_profit")} `;break;case"stop_loss":e=`${i18n.t("stop_loss")} `;break;case"buy_dip":e=`${i18n.t("buy_dip")} `;break;default:e=""}(0,a.ag)({timeout:3e3,closeOnClick:!1,message:i18n.t("notification.order_triggered",{kind_name:e,symbol:t.attributes.symbol})})}}))})(t),"pincode"===e&&window.location.href.indexOf("/mobile_login")>=0&&t&&t.data&&t.data.pincode){const t=c()("#js-pin-code");let e=t.attr("data-pin");t.text(e)}})),n}},1580:function(t,e,n){"use strict";n.d(e,{AF:function(){return vt},An:function(){return P},Az:function(){return h},D1:function(){return Y},Dk:function(){return dt},E1:function(){return At},EG:function(){return x},Em:function(){return xt},Er:function(){return k},Ex:function(){return _},HT:function(){return $t},IZ:function(){return at},I_:function(){return m},Im:function(){return ot},Iq:function(){return v},Kg:function(){return K},LG:function(){return Nt},Le:function(){return It},M2:function(){return X},MK:function(){return yt},O0:function(){return kt},PE:function(){return O},Pu:function(){return V},Q1:function(){return D},Ro:function(){return J},SH:function(){return y},ST:function(){return St},Sr:function(){return w},St:function(){return Ot},U9:function(){return $},Uu:function(){return mt},VV:function(){return et},Vl:function(){return p},Wr:function(){return I},Xe:function(){return wt},Xm:function(){return it},Xq:function(){return C},YQ:function(){return q},ZH:function(){return Dt},ZN:function(){return S},aI:function(){return H},aj:function(){return Tt},dm:function(){return L},fL:function(){return b},fp:function(){return tt},gD:function(){return R},gp:function(){return Q},hU:function(){return Wt},hj:function(){return g},hu:function(){return A},kb:function(){return pt},lW:function(){return ft},lb:function(){return T},m3:function(){return G},m5:function(){return bt},mN:function(){return Mt},nG:function(){return Pt},q2:function(){return j},qE:function(){return F},qW:function(){return _t},qr:function(){return B},rr:function(){return E},s2:function(){return ct},sA:function(){return ut},sJ:function(){return st},sg:function(){return nt},sv:function(){return Ct},t2:function(){return Et},t_:function(){return W},v1:function(){return lt},vC:function(){return jt},wk:function(){return U},xQ:function(){return z},xq:function(){return Ft},z9:function(){return Lt}});var o=n(5479),r=n.n(o),i=n(8951),a=n(3435),s=n(8073),c=n(3617),l=n(5353),u=n(6145),d=n(6680);const{PublicKey:f}=n(7515),h=999e15,p=.01,m=3e4,g=16e3,w=1e9,b=5e-6,y={raydium_amm:0,raydium_clmm:1,orca_whirlpool:2,meteora_amm:3,meteora_dlmm:4,raydium_cpmm:5,pump:6,moonshot:7,degenfund:8,makenow:9,memelive:10},v=9,$=t=>new c.A(t).dividedBy(new c.A(1e9)).toNumber(),_={discover:1,trending:2,memescope:3};let x=new Intl.NumberFormat("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}),k=new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),j=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});const C=t=>{let{prefix:e,url:n}=t;return e&&(n=(0,l.A)(e,n)),(0,l.A)("/",(0,s.JK)(),n)},T=()=>window.innerWidth<920,F=(t,e,n=!1)=>{const o=n?"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb":"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA";if(!t||!e)return null;try{return t.map((t=>`${(0,d.Xt)(new f(e),new f(t),!1,new f(o))}`))}catch(r){return console.error(r),null}},E=()=>/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),I=(t="",e=6,n=4)=>t&&t.length>e+n?`${t.slice(0,e)}...${t.slice(-n)}`:t,O=()=>document.head.querySelector("meta[name=csrf-token]")?.content,A=()=>!1,D=async()=>{if(window.newAlerts){let t=await fetch("/api/alerts",{cache:"no-store"}).then((t=>t.json()));t&&t.data&&t.data.forEach((t=>{let e=t.attributes||t;(0,a.Th)({alertId:e.id,iconPosition:"session"===e.handle?"center":"",message:e.content,link:e.url,icon:e.icon,iconColor:e.iconColor,img:e.img,timeout:e.timeout})}))}};async function S(t){return await yt()}function P(){r()(".js-timestamp").each(((t,e)=>{let n=r()(e),o=parseInt(n.data("timestamp")),i=new Date(1e3*o),a=String(i.getMinutes()).padStart(2,"0"),s=String(i.getHours()).padStart(2,"0"),c=String(i.getMonth()+1).padStart(2,"0"),l=String(i.getDate()).padStart(2,"0");n.text(`${i.getFullYear()}-${c}-${l}@${s}:${a}`)}))}const N=(t,e)=>{let n;return n=12*(e.getFullYear()-t.getFullYear()),n-=t.getMonth(),n+=e.getMonth(),e.getDate()<t.getDate()&&(n-=1),n<=0?0:n},M=({start:t,end:e}={})=>{const n=t instanceof Date?t:new Date(t),o=e instanceof Date?e:new Date(e),r=o.getTime()-n.getTime();return{years:o.getFullYear()-n.getFullYear(),months:N(n,o),days:Math.floor(r/864e5),hours:Math.floor(r/36e5),minutes:Math.floor(r/6e4),seconds:Math.floor(r/1e3)}},L=t=>{let e=M({start:t,end:(new Date).getTime()});0===Math.floor(e.days/365)&&e.years>=1&&(e.years-=1);const n=[["y",e.years],["mo",e.months],["d",e.days],["h",e.hours],["m",e.minutes],["s",e.seconds]];let o=n.findLastIndex((([t,e])=>0===e));if(5===o)return i18n.t("time.just_now");const r=n.slice(o+1,6);let i=[];return r.forEach((t=>{if(!(i.length>=2)&&("h"===t[0]&&(t[1]=t[1]%24),"m"===t[0]&&(t[1]=t[1]%60),"s"===t[0]&&(t[1]=t[1]%60),"d"===t[0]&&(t[1]=t[1]-365*e.years-Math.floor(30.44*e.months)),"mo"===t[0]&&(t[1]=t[1]%12),t[1]>0)){let e=i18n.t(`time.${t[0]}`);i.push(`${t[1]}${e}`)}})),i.join(" ")},W=t=>{const e=(new Date).getTime()-t;let n=Math.floor(e/6e4),o=Math.floor(e/36e5),r=Math.floor(e/1e3);const i=[["d",Math.floor(e/864e5)],["h",o],["m",n],["s",r]];let a=i.findLastIndex((([t,e])=>0===e));if(3===a)return i18n.t("time.just_now");const s=i[a+1];n%=60,o%=24;const c=i18n.t(`time.${s[0]}`);return"d"===s[0]&&o>0?`${s[1]}${c} ${o}${i18n.t("time.h")}`:"h"===s[0]&&n>0?`${s[1]}${c} ${n}${i18n.t("time.m")}`:`${s[1]}${c}`},B=(t,e=(new Date).getTime(),{disablePrefix:n,double:o}={})=>{const r=e>t||n?"":i18n.t("time.ago"),i={seconds:`${i18n.t("time.s")}${r}`,minutes:`${i18n.t("time.m")}${r}`,hours:`${i18n.t("time.h")}${r}`,days:`${i18n.t("time.d")}${r}`,months:`${i18n.t("time.mth")}${r}`,years:`${i18n.t("time.y")}${r}`},a=M({start:t,end:e}),s=Object.entries(a);let c=s.findLastIndex((([t,e])=>0===e));if(-1===c&&(c=0),c===s.length-1)return i18n.t("time.just_now");const l=s[c+1];let u=`${l[1]}${i[l[0]]}`;if(s[c+2]&&o){const t=s[c+2];u+=`${u}${t[1]}${i[t[0]]}`}return u},U=t=>Intl.NumberFormat("en",{notation:"compact"}).format(t),H=t=>{let e="";"-"==(t+="").charAt(0)&&(t=t.substring(1),e="-");let n=t.split(/[e]/gi);if(n.length<2)return e+t;let o=".",r=n[0],i=+n[1],a=(r=r.replace(/^0+/,"")).replace(o,""),s=r.split(o)[1]?r.indexOf(o)+i:a.length+i,c=s-a.length,l=""+BigInt(`${a}`);return a=i>=0?c>=0?l+"0".repeat(c):u():s<=0?"0."+"0".repeat(Math.abs(s))+l:u(),c=a.split(o),(0==c[0]&&0==c[1]||0==+a&&0==+l)&&(a=0),e+a;function u(){return a.replace(new RegExp(`^(.{${s}})(.)`),`$1${o}$2`)}},G=(t,{fractionLength:e=5}={})=>parseFloat(t)>1e3?(t=parseFloat(t))>h?">999Q":`${U(t)}`:`${K(t,e)}`,V=(t,e)=>{(0,s.gL)()&&fetch("/api/users/update_show_page_conf",{method:"POST",headers:{"x-csrf-token":O(),"content-type":"application/json"},body:JSON.stringify({key:t,value:e}),credentials:"same-origin"}).then((t=>t.json()))},q=(t,e)=>{if(!(0,s.gL)()||!t&&"myHoldings"!==e)return;const n={memescope:"/api/memescope/update_selected_wallets",myHoldings:"/api/my_holdings/update_selected_wallets",default:"/api/users/update_selected_wallets"};fetch(e&&n[e]?n[e]:n.default,{method:"POST",headers:{"x-csrf-token":O(),"content-type":"application/json"},body:JSON.stringify({wallets:Array.isArray(t)?t.join(","):t}),credentials:"same-origin"}).then((t=>t.json()))},Q=({numb:t,defaultVal:e,unit:n,fractionLength:o})=>{R(o)&&(o=7),n||="";let r="$"==n?n:"",i="$"!=n?n:"";return e||="N/A",R(t)||isNaN(t)?e:parseFloat(t)>1e3?(t=parseFloat(t))>h?">999Q":`${r}${U(t)}${i}`:`${r}${K(t,o)}${i}`},z=({numb:t,defaultVal:e,unit:n,fractionLength:o})=>{R(o)&&(o=2),e||="N/A",n||="";let r="$"==n?n:"",i="$"!=n?n:"";if(R(t)||isNaN(t))return e;{let e;switch(`${H(parseInt(t))}`.length){case 0:case 1:case 2:case 3:e=Z(t,o);break;case 4:case 5:case 6:e=`${Z(t/1e3,o)}K`;break;case 7:case 8:case 9:e=`${Z(t/1e6,o)}M`;break;case 10:case 11:case 12:e=`${Z(t/1e9,o)}B`;break;case 13:case 14:case 15:e=`${Z(t/1e12,o)}T`;break;case 16:case 17:case 18:e=`${Z(t/1e15,o)}Q`;break;default:e=">999Q"}return`${r}${e}${i}`}},J=t=>"number"===typeof t&&t.toString().length<13?1e3*t:t,K=(t,e=7)=>{const n={0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089",10:"\u2081\u2080",11:"\u2081\u2081",12:"\u2081\u2082",13:"\u2081\u2083",14:"\u2081\u2084",15:"\u2081\u2085",16:"\u2081\u2086",17:"\u2081\u2087",18:"\u2081\u2088",19:"\u2081\u2089"};if(!t)return t;let o,r;if(t="string"===typeof t?parseFloat(t):t,t=H(parseFloat(t.toFixed(18)).toString()),[o,r]=t.split("."),r&&r.length>2){let t="";return r.match(/([0-9])\1*/g).forEach((e=>{let o=e.length;t=o>2?t.concat(`${e[0]}${n[o]}`):t.concat(e)})),r=t.slice(0,e),e>0?`${o}.${r}`:`${o}`}return t},R=t=>null==t,Y=(t,e,{formatter:n,container:o,triggerUpdate:i=!0}={})=>{if(void 0!==e){(o||r()(document)).find(`[data-cable-val="${t}"]`).each((function(){let n=e;const{prefix:o,suffix:i}=r()(this).data();let a;a=["mktCapVal"].indexOf(t)>=0?z({numb:n,fractionLength:2,unit:o||i}):Q({numb:n,fractionLength:6,unit:o||i}),r()(this).attr("data-value",e),r()(this).html(a)})),i&&r()(document).trigger("cableValue:update",[{[t]:e}])}},X=(t,e=6)=>R(t)?t:parseFloat(parseFloat(t).toFixed(e)),Z=(t,e=6)=>{if(R(t))return t;{let n=Math.trunc(t*Math.pow(10,e))/Math.pow(10,e);return parseFloat(n).toFixed(e)}},tt=(t,e)=>{const n=e||(0,s.Dr)();return(0,l.A)(`https://photon${(0,s.YG)()?"-staging":""}${n&&"eth"!==n?`-${n}`:""}.tinyastro.io`,t||"")},et=(t,e)=>e?`/${(0,s.JK)()}/lp/pool_redirect?id=${e}`:t?`/${(0,s.JK)()}/lp/${t}?handle=${(0,s.ay)()}`:void 0;function nt(t,e=300){let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,o)}),e)}}const ot=t=>0===Object.keys(t).length,rt=t=>null!==t&&"object"===typeof t,it=(t,{removeFalsy:e,keepZero:n,removeEmptyArray:o}={})=>{try{return Object.entries(t).reduce(((t,[r,i])=>rt(i)&&ot(i)||e&&!i&&(!n||0!==i)||void 0===i||null===i||o&&Array.isArray(i)&&0===i.length?t:{...t,[r]:i}),{})}catch(r){return logger.error(r),t}},at=(t,e,n=!0)=>{let o,i,a,s,c=r()("#js-portfolio-config"),l=r()("#js-token-show-portfolio"),u=!0,d=!1;if(n&&t&&(parseFloat(t.invested_eth)>0||parseFloat(t.remaining)>0)){o=t.remaining_eth,i=t.pl,a=t.pl_eth;let e=t.sold_eth;s=t.invested_eth,c.attr("data-portfolio-invested-eth",s),c.attr("data-portfolio-sold-eth",e),c.attr("data-portfolio-remaining",t.remaining),l.find(".js-invested-eth").text(x.format(s)),d=!0,l.find(".js-sold-eth").text(x.format(e))}else{s=parseFloat(c.attr("data-portfolio-invested-eth"));let t=parseFloat(c.attr("data-portfolio-remaining"));if(s>0||t>0)if(t>0){o=parseFloat(e*t);let n=parseFloat(c.attr("data-portfolio-sold-eth"));s>0&&(a=n+o-s,i=a/s*100)}else u=!1;else u=!1}if(u){void 0!==o&&(c.attr("data-portfolio-remaining-eth",o),d=!0),void 0!==i&&c.attr("data-portfolio-pl",i),void 0!==a&&c.attr("data-portfolio-pl-eth",a),l.find(".js-remaininig-eth").text(x.format(o));let t=l.find(".js-pl");if(void 0!==i&&(t.text(j.format(i/100)),i>=0?t.addClass("u-color-green").removeClass("u-color-red"):t.addClass("u-color-red").removeClass("u-color-green")),void 0!==a){let t=l.find(".js-pl-eth");parseFloat(a)>=0?t.addClass("u-color-green").removeClass("u-color-red"):t.addClass("u-color-red").removeClass("u-color-green"),t.text(`(${parseFloat(a)>=0?"+":""}${k.format(a)})`)}d&&r()(document).trigger("portfolio:update",[{remainingEth:o,investedEth:s,afterPurchase:n}])}},st=({invested:t=0,remaining:e=0,sold:n=0})=>{const o=t>0?n+e-t:0,r=t>0?o/t*100:null;return{pl:{value:r,label:R(r)?"N/A":`${r>=0?"+":""}${j.format(r/100)}`},plEth:{value:o,label:`${parseFloat(o)>=0?"+":""}${k.format(o||0)}`}}};window.calulatePnL=st;const ct=({selector:t,offset:e=0})=>{const n="string"===typeof t?r()(t).first():t;n[0].getBoundingClientRect().top,window.pageYOffset;r()("html, body").animate({scrollTop:n.offset().top+e},700)},lt={theme:"astro2",zIndex:99999999,allowHTML:!0,onMount:t=>{r()(t.reference).data("initDisabled")&&t.disable()}},ut=(t,e)=>{(t||r()(document)).find("[data-tippy-content]").each((function(){e&&this._tippy?this._tippy.destroy():this._tippy||(0,i.Ay)(this,lt)}))},dt=t=>{let e=r()(".js-top-banner");if(e.length>0&&"true"===e.attr("data-ismm")){var n=document.createElement("input");document.body.appendChild(n),n.setAttribute("id","copyTxtTmpField"),document.getElementById("copyTxtTmpField").value=t,n.select(),document.execCommand("copy"),document.body.removeChild(n)}else navigator.clipboard&&navigator.clipboard.writeText(t).then((function(){(0,a.ag)({message:i18n.t("notification.success_copy"),timeout:1e3})}),(function(t){(0,a.F8)({message:i18n.t("notification.error_clipboard"),timeout:1e3})}))},ft=(t,e)=>{const n=function(t){let n=r()(this).attr(`data-${e}`),o=r()(".js-top-banner");if(o.length>0&&"true"===o.attr("data-ismm")){var i=document.createElement("input");document.body.appendChild(i),i.setAttribute("id","copyTxtTmpField"),document.getElementById("copyTxtTmpField").value=n,i.select(),document.execCommand("copy"),document.body.removeChild(i)}else navigator.clipboard&&navigator.clipboard.writeText(n).then((function(){(0,a.ag)({message:i18n.t("notification.success_copy"),timeout:1e3})}),(function(t){var e=document.createElement("input");document.body.appendChild(e),e.setAttribute("id","copyTxtTmpField"),document.getElementById("copyTxtTmpField").value=n,e.select(),document.execCommand("copy"),document.body.removeChild(e)}))};"string"===typeof t?r()(document).on("click",t,n):t.click(n)};let ht={};const pt=(t,e,n)=>{if(t){let i=e&&ht[t]?(o=ht[t],r=e,rt(o)?!o||R(r)?o:Object.entries(o).reduce(((t,[e,n])=>{let i=!1;return i=Array.isArray(r)?r.includes(e):"function"===typeof r?r(e,n,o):e===r,i?{...t,[e]:n}:t}),{}):(console.error("Incorrect type: ",typeof o),null)):ht[t];return n&&!R(i)?Object.values(i).reduce(((t,e)=>t+e),0):i}var o,r;return ht},mt=async({tokenAddress:t,tokenDecimals:e,wallets:n,total:o,forceFetch:r}={})=>{try{if(!t)return;let i=n||window._genWallets?.map((({generated_wallet:t})=>t))||[],a=pt(t,i,o);return(r||R(a)||i&&!((t,e)=>{try{if(!t||!e)return;let n=pt(t);return!!n&&(n=Object.keys(n),(Array.isArray(e)?e:[e]).reduce(((t,e)=>t&&n.includes(e)),!0))}catch(n){console.error(n)}})(t,i))&&(await bt({tokenAddress:t,tokenDecimals:e,wallets:i}),a=pt(t,i,o)),a}catch(i){console.error(i)}};window._getTokenBalance=pt;const gt=(t,e)=>{if(!t)return;const n={...ht[t]||{},...e};ht=Object.freeze({...ht,[t]:n});const o={type:"token",data:{[t]:e},tokenAddress:t,allBalances:ht};"string"===typeof t&&(o.tokenAddress=t,o.balances=n),r()(document).trigger("wallets:retrieveBalances",[o])};function wt(t){const e=[];t.forEach((t=>{const n=t.wallet,o=window._genWallets?.find((({generated_wallet:t})=>t===n))?.name||I(n);e.push(`${o} - ${t.error}`)})),(0,a.F8)({message:e.join("</br>"),timeout:4e3,closeOnClick:!0})}async function bt({tokenAddress:t,tokenDecimals:e,wallets:n=""}={}){let o={success:!1,totalBalance:0,balances:{}};if(t){r()(document).trigger("wallets:startRetrieveBalances");const i={token_address:t,token_decimals:e,wallets:Array.isArray(n)?n.join(","):n};if(""!==n){let e=F(Array.isArray(n)?n:[n],t);e&&(i.associated_accs=e.join(","))}o=await fetch("/api/token_balances",{method:"POST",headers:{"x-csrf-token":O(),"content-type":"application/json"},body:JSON.stringify(i),credentials:"same-origin"}).then((t=>t.json())),r()(document).trigger("wallets:endRetrieveBalances"),gt(t,o.balances),o&&o.success||(0,a.F8)({message:"Something went wrong, please reload the page and try again.",timeout:2e3})}else(0,a.F8)({message:"Something went wrong, please reload the page and try again.",timeout:2e3});return o}async function yt(){let t=await fetch("/sol_balance",{method:"GET",mode:"cors",cache:"no-store"}).then((t=>t.json()));return t&&t.success?(window.walletBalances=t.balances,r()(document).trigger("wallets:retrieveBalances",[{type:"quote",balances:t.balances}]),[X(t.solBalance,7),t.balances]):[null,{}]}const vt=["0x000000000000000000000000000000000000dead","0x0000000000000000000000000000000000000000","0x0000000000000000000000000000000000000001","0x0000000000000000000000000000000000000002","0x0000000000000000000000000000000000000003","0x0000000000000000000000000000000000000004","0x0000000000000000000000000000000000000005","0x0000000000000000000000000000000000000006","0x0000000000000000000000000000000000000007","0x0000000000000000000000000000000000000008","0x0000000000000000000000000000000000000009","0x00000000000000000000045261d4ee77acdb3286","0x0123456789012345678901234567890123456789","0x1111111111111111111111111111111111111111","0x1234567890123456789012345678901234567890","0x2222222222222222222222222222222222222222","0x3333333333333333333333333333333333333333","0x4444444444444444444444444444444444444444","0x6666666666666666666666666666666666666666","0x8888888888888888888888888888888888888888","0xbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb","0xdead000000000000000042069420694206942069","0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee","0xffffffffffffffffffffffffffffffffffffffff","0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"],$t=(t,e)=>{try{const n=((t,e)=>{const n=e-t,o=6e4,r=36e5,i=24*r;return{days:Math.floor(n/i),hours:Math.floor(n%i/r),minutes:Math.floor(n%r/o),seconds:Math.floor(n%o/1e3)}})(J(t),J(e));let o=["seconds"];return n.days?o=["days","hours"]:n.hours?o=["hours","minutes"]:n.minutes&&(o=["minutes","seconds"]),o.map((t=>{let e=n[t];if(R(e))return null;{let e;return e=["days","hours"].indexOf(t)>=0?n[t]:`${n[t]}`.padStart(2,"0"),`${e}${i18n.t(`time.${t[0]}`)}`}})).filter((t=>!!t)).join(" ")}catch(n){return console.error(n),""}},_t=(t,{onTick:e,onStart:n,onFinished:o})=>{if(!t)return;let r=!1;const i=6e4,a=36e5,s=24*a,c=new Date(t).getTime(),l=setInterval((()=>{const t=(new Date).getTime(),u=c-t,d={days:Math.floor(u/s),hours:Math.floor(u%s/a),minutes:Math.floor(u%a/i),seconds:Math.floor(u%i/1e3)};if(u<0)return o&&o(),void clearInterval(l);e&&e(d),n&&!r&&(n(),r=!0)}),1e3)},xt=(t,e)=>{if(!e)return;let n=e.split(".");"attributes"!==n[0]||t.attributes||(n=n.slice(1));let o=t;return n.forEach((t=>{o=o[t]})),o},kt={fn:t=>({onShow(){"function"===typeof t.props.content&&t.setContent(t.props.content(t.reference))}})},jt=(t,e)=>{try{if(!t||"string"!==typeof t&&"number"!==typeof t)return t;let n=t.toString().replace(/,/g,".").replace(/[^0-9.]/g,""),o=n.split(".");return n=o.shift()+(o.length?".":"")+o.join(""),e?parseFloat(n):n}catch(n){return console.error(n),t}},Ct=t=>t&&"string"===typeof t?t.replace(/[^0-9]/g,""):t;function Tt(t){return t.replace(/[&<>"'`]/gi,"")}const Ft=(t,e,n=!0)=>{const o=r()(t);n&&(r()(".js-modal").addClass("is-hidden"),r()("html").removeClass("modal-open")),e&&o.length?(o.removeClass("is-hidden"),r()("html").addClass("modal-open")):(o.addClass("is-hidden"),r()("html").removeClass("modal-open"))},Et=()=>{const t=r()(".js-modal--signup");t.length&&(r()(".js-modal").addClass("is-hidden"),t.removeClass("is-hidden"),r()("html").addClass("modal-open"))};function It(t,e,...n){return function(t,e){return(...n)=>(0,s.gL)()?t.apply(this,n):(Et(),e?e.apply(this,n):void 0)}(t,e)(...n)}const Ot=()=>window.solana||window.solflare,At=async({amount:t,txHash:e,wallets:n,moonpay:o})=>{const r=await fetch("/api/transfer_funds/deposit_track",{method:"POST",headers:{"x-csrf-token":O(),"content-type":"application/json"},body:JSON.stringify({amount:t,tx_hash:e,wallets:n,moonpay:o}),credentials:"same-origin"}).then((t=>t.json()));o||(r&&r.success?(0,u.Dy)(r,{timeoutMsg:m}):(0,a.F8)({message:i18n.t("notification.tracking_failed"),timeout:2e3}))},Dt=t=>{try{return t?t.toString().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "):t}catch(e){return console.error(e),t}},St=(t,e)=>!R(t)&&parseInt(t)===y[e],Pt=t=>{if(R(t))return"";return Object.keys(y).find((e=>y[e]===parseInt(t)))||""},Nt=(t,e)=>!R(t)&&rt(t)&&e?Object.entries(t).reduce(((t,[n,o])=>({...t,[n]:e(o,n)})),{}):t,Mt=(t,e)=>!R(t)&&rt(t)&&e?Object.entries(t).reduce(((t,[n,o])=>e(o,n)?{...t,[n]:o}:t),{}):t,Lt=t=>"string"===typeof t&&t.length>=32&&t.length<=44&&t.match(/^[0-9a-zA-Z]*$/),Wt=(t,e)=>{try{if(R(t)||R(e))return!1;const n=e.toString().toLowerCase();return!!t?.toString().toLowerCase()?.split(" ").find((t=>t.startsWith(n)))}catch(n){return console.error(n),!1}}},8073:function(t,e,n){"use strict";n.d(e,{AC:function(){return W},B2:function(){return j},CI:function(){return w},Dr:function(){return Et},EP:function(){return dt},Ej:function(){return P},FP:function(){return Q},GZ:function(){return et},HG:function(){return F},Hc:function(){return E},Hm:function(){return O},Ij:function(){return I},J2:function(){return q},JK:function(){return k},JU:function(){return C},Jc:function(){return U},Km:function(){return lt},LM:function(){return G},Lq:function(){return L},Lx:function(){return H},OW:function(){return ut},O_:function(){return c},Ou:function(){return J},Oy:function(){return D},PL:function(){return tt},QI:function(){return $},Rw:function(){return vt},Rx:function(){return pt},S_:function(){return Ft},Tc:function(){return wt},Vg:function(){return b},XI:function(){return M},Xx:function(){return _t},YG:function(){return l},Yz:function(){return X},ay:function(){return _},b8:function(){return u},cG:function(){return yt},cq:function(){return y},d8:function(){return ot},dI:function(){return $t},eU:function(){return ht},eX:function(){return ct},fh:function(){return jt},gL:function(){return It},gY:function(){return Ct},hF:function(){return ft},iP:function(){return T},j8:function(){return N},jL:function(){return mt},jx:function(){return Z},l2:function(){return Y},o1:function(){return v},o7:function(){return xt},p1:function(){return nt},pw:function(){return p},r2:function(){return z},rI:function(){return A},sE:function(){return gt},sG:function(){return S},sq:function(){return x},tI:function(){return kt},tw:function(){return V},wu:function(){return B},xV:function(){return Tt},xb:function(){return bt},z9:function(){return K}});var o=n(5479),r=n.n(o),i=n(1580),a=n(7439),s=n.n(a);n(844);const c=()=>"photon-sol.tinyastro.io"===window.location.host,l=()=>"photon-staging-sol.tinyastro.io"===window.location.host,u=()=>c()?"wss://ws-token-sol-lb.tinyastro.io/cable":l()?"wss://ws-token-staging-sol.tinyastro.io/cable":"ws://localhost:8080/cable";let d;const f=()=>{const t=window.taConfig||{};return Object.entries(t).reduce(((t,[e,n])=>{if(null===(o=n)||"object"!==typeof o||Array.isArray(n))return{...t,[s()(e)]:n};{const o=((t,e)=>{if(t)return Object.entries(t).reduce(((t,[n,o])=>({...t,[s()(e?`${e}-${n}`:n)]:o})),{})})(n,e);return{...t,...o}}var o}),{})},h=()=>{d||(window.taConfig?(("localhost:3000"===window.location.host||l())&&console.log("Copy from taConfig"),d=Object.freeze(f())):(console.log("config callbalck"),(()=>{const t=r()("#js-config").data(),e=r()("#js-page-config").data();d=Object.freeze({...t,...e})})()))},p=()=>{d||(window.taConfig?d=Object.freeze(f()):window.addEventListener("DOMContentLoaded",(function(){h()})))};p();const m=()=>(d||h(),d||{}),g=(t,e)=>()=>{const n=m()[t];return(0,i.gD)(n)?n:"float"===e?parseFloat(n):"int"===e?parseInt(n):"bool"===e?"true"===n||!0===n:n};window._getConfig=()=>({...m()});const w=t=>{(t=>{d=Object.freeze({...d,...t})})(t)},b="5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1",y=(g("ppk"),g("genWallet")),v=g("explorerDomain"),$=g("wallet"),_=(g("tradeCtr"),g("uhandle")),x=g("activeUser"),k=(g("isMobile"),g("locale")),j=g("moonkey"),C=g("signupstep"),T=(g("memeLiveWallets"),g("showAmountIndex")),F=(g("showApprovedBalance"),g("showCirculatingSupply"),g("showCreatedAt")),E=(g("showFromPump"),g("showPumpPoolId")),I=g("showMoonshotPoolId"),O=g("showLastEventTimestamp"),A=g("showFirstEventTimestamp"),D=g("showPurchasesCount"),S=g("showDecimals"),P=g("showOwnerWallet"),N=g("showDeployerWallet"),M=g("showCaDeployerWallet"),L=g("showLpDeployerWallet"),W=g("showDefaultInterval"),B=g("showQuoteBalance"),U=g("showPoolFactoryName"),H=g("showPoolId"),G=g("showIsWatching"),V=g("showTokenAddress"),q=g("showTokenBalance"),Q=g("showTokenSymbol"),z=g("showTotalSupply"),J=g("showHumanTotalSupply"),K=(g("showChartHeight"),g("showTokenApproved"),g("showPriceUsd")),R=g("showPriceQuote"),Y=(g("showIsInternalWallet"),g("showChartCurrency")),X=g("showPoolAddress"),Z=g("showMeteoraVaultAddress"),tt=g("showTxDateAge"),et=g("showTxSort"),nt=g("showDex"),ot=g("showQuoteToken0","bool"),rt=g("showReserve0"),it=g("showReserve1"),at=g("showReserve0Tr"),st=g("showReserve1Tr"),ct=g("showChartType"),lt=g("showMinliq","float"),ut=g("showIs2022","bool"),dt=g("showJitoTips"),ft=g("showMigratedAddress"),ht=g("showIgnored"),pt=g("showOutliers"),mt=g("showOldPool"),gt=g("showTokenId"),wt=(g("showDefaultBribery","float"),g("showMyTrades")),bt=(g("showDevTrades"),g("showOtherTrades")),yt=g("showSnipers"),vt=g("showInsiders"),$t=g("showAvgPriceLine"),_t=g("showOrderLines"),xt=(g("showPreset"),g("showWallets")),kt=g("showCurveType"),jt=g("showMigratingTarget"),Ct=g("showTxsCount","int"),Tt=g("dashboardWelcomeTourPassed"),Ft=(g("discoverWelcomeTourPassed"),g("discoverIsInternalWallet"),()=>({poolId:H(),poolFactoryName:nt(),tokenAddress:V(),tokenDecimals:S(),poolData:{decimals:S(),priceQuote:R(),quoteToken0:ot(),reserve0:rt(),reserve1:it(),reserve0Tr:at()||rt(),reserve1Tr:st()||it()}})),Et=g("blockchain"),It=(g("blockchainName"),g("blockchainScanUrl"),()=>!!x())},707:function(t,e,n){"use strict";n.d(e,{K8:function(){return d},ZH:function(){return h},pw:function(){return l}});var o=n(2137),r=n(1580),i=n(4330),a=n.n(i),s=n(5479),c=n.n(s);const l=t=>{const e=window._portfolioState.calculateAverage(t),{investedEth:n,remainingEth:o}=e;return{investedEth:parseFloat(n)||0,remainingEth:parseFloat(o)||0}},u=t=>(0,r.LG)(t,(t=>t&&!isNaN(Number(t))?parseFloat(t):t));class d{constructor(t={}){const{wallets:e=[],positions:n=[],type:i,poolId:s,onInit:l}=t;this.uid=a()(),this.config={...t};const u={wallets:(0,o.A)(e).reduce(((t,e)=>({...t,[e.generatedWallet]:e})),{})};this.state=u,this.setPositionsData(n);const d=this;c()(document).on("config:update",(function(t,{showPriceQuote:e}){const n={};"show"===i&&e&&(n.poolPriceQuote=e),(0,r.Im)(n)||d.updatePositions(n)})),c()(document).on("portfolio:fetchPL",(async function(t,{poolId:e,wallets:n}){await d.fetchPL(e,n)})),l&&l(this)}async fetchPL(t,e){const n=this;try{if(t!==n.config.poolId)return;let r=`/api/lp/refresh_p_l?pool_id=${t}`;e&&(r+=`&wallet=${Array.isArray(e)?e.join(","):e}`);const i=await fetch(r,{cache:"no-store"}).then((t=>t.json()));return i&&i.plObj&&((0,o.A)(i.plObj).forEach((t=>{const e=n.state.wallets[t.generatedWallet];e&&(e.pos=u(t),c()(document).trigger(`portfolio:updateWallet.${n.uid}`,[{wallet:e,state:n.state,instance:n,action:"fetch"}]))})),n.state.average=n.calculateAverage(),n.checkVisibility(),n.broadcastUpdate({action:"fetch"})),!0}catch(r){console.error(r)}}broadcastUpdate(t={}){c()(document).trigger(`portfolio:updateState.${this.uid}`,[{poolId:this.config.poolId,type:this.config.type,state:this.state,instance:this,...t}]),this.config.onStateUpdate&&this.config.onStateUpdate()}setPoolId(t,e){return this.config.poolId=t,this.setPositionsData(e||[]),this.broadcastUpdate(),this}setPositionsData(t){this.state.wallets=(0,r.LG)(this.state.wallets,(t=>({...t,pos:null}))),(0,o.A)(t).forEach((t=>{const{generatedWallet:e}=t;e&&this.state.wallets[e]&&(this.state.wallets[e].pos=u(t))})),this.state.average=this.calculateAverage(),this.checkVisibility()}setDataByWallet(t,e){try{const n=this.state.wallets[t];if(!n||!e)return;const o={...n,...e};o.pos=this.refreshPosition(o.pos),this.state.wallets[t]=o,this.state.average=this.calculateAverage(),this.checkVisibility(),c()(document).trigger(`portfolio:updateWallet.${this.uid}`,[{poolId:this.config.poolId,type:this.config.type,wallet:newWallet,state:this.state,instance:this}]),instance.broadcastUpdate()}catch(n){console.error(n)}}checkVisibility(){return this.state.isVisible=!(0,r.Im)(this.getPositions()),this.state.isVisible}refreshPosition(t,e={}){try{if(!t)return t;const n={...t},{poolPriceQuote:o}=e,i=parseFloat(t.remainingTokens||0);if((parseFloat(t.investedEth||0)>0||i>0)&&i>0){if(!(0,r.gD)(o)){let t=parseFloat(o*i);n.remainingEth=t}const t=(0,r.sJ)({invested:n.investedEth,remaining:n.remainingEth,sold:n.soldEth});n.pl=t.pl.value,n.plEth=t.plEth.value}return this.checkVisibility(),n}catch(n){return console.error(n),t}}updatePositions(t){try{this.state.wallets=(0,r.LG)(this.state.wallets,(e=>({...e,pos:e.pos?this.refreshPosition(e.pos,t):null}))),this.state.average=this.calculateAverage(),this.checkVisibility(),this.broadcastUpdate()}catch(e){console.error(e)}}getPositions(){return(0,r.mN)(this.state.wallets,(t=>!!t.pos))}getPlViewProps(t){try{if(!t)return null;const t="string"===typeof t?this.state.wallets[t]:t,e=t?t.pos:null;if(!e)return null;const{pl:n,plEth:o}=e;return((t=0,e=0)=>{try{return{pl:{value:parseFloat(t)||0,label:(0,r.gD)(t)?"N/A":`${t>=0?"+":""}${r.q2.format(t/100)}`,color:parseFloat(t)>=0?"green":"red"},plEth:{value:parseFloat(e)||0,label:`${parseFloat(e)>=0?"+":""}${r.Er.format(e||0)}`,color:parseFloat(e)>=0?"green":"red"}}}catch(n){return console.error(n),null}})(n,o)}catch(e){return null}}calculateAverage(t){const e=this.getPositions(),n=t?t.map((t=>e[t])).filter((t=>t&&!!t.pos)):Object.values(e),o={investedEth:0,investedTokens:0,remainingEth:0,remainingTokens:0,soldEth:0,soldTokens:0};n.forEach((t=>{Object.keys(o).forEach((e=>{const n=t.pos&&!(0,r.gD)(t.pos[e])&&parseFloat(t.pos[e])||0;o[e]=(o[e]||0)+n}))}));const i=(0,r.sJ)({invested:o.investedEth,remaining:o.remainingEth,sold:o.soldEth});return o.pl=i.pl.value,o.plEth=i.plEth.value,o}formatData(t){if(!t)return{};const{generatedWallet:e,investedEth:n,remainingEth:o,soldEth:i,pl:a,plEth:s}=t,c={...t,generatedWallet:(0,r.Wr)(e||""),investedEth:r.EG.format(n),remainingEth:r.EG.format(o),soldEth:r.EG.format(i),pl:(0,r.gD)(a)?"N/A":`${a>=0?"+":""}${r.q2.format(a/100)}`,plEth:0!==s?`${parseFloat(s)>=0?"+":""}${r.Er.format(s||0)}`:""};return c.plHtml=`\n      <span class="${parseFloat(a)>0?"u-color-green":"u-color-red"}">\n        ${c.pl} ${c.plEth?`(${c.plEth})`:""}\n      </span>\n    `,c}}let f;const h=()=>f;e.Ay=t=>(f||(f=new d(t)),f)},7983:function(t,e,n){"use strict";n.d(e,{sO:function(){return r}});n(3435);var o=n(1580);const r=async()=>{let t;const e=(0,o.St)();if(e)try{t=e}catch(n){logger.error("catch in getProvider"),logger.error(n)}if(t){window.provider=t;try{await e.connect({onlyIfTrusted:!0})}catch(n){}return t}return window.noProvider=!0,!1}},3435:function(t,e,n){"use strict";n.d(e,{F8:function(){return h},OA:function(){return f},Th:function(){return p},ag:function(){return d}});var o=n(37),r=n.n(o),i=n(1580),a=n(4330),s=n.n(a),c=n(5479),l=n.n(c);const u={progressBar:!1,position:"topCenter",icon:null,transitionIn:"fadeInDown",transitionOut:"fadeOutUp",animateInside:!1,drag:!1,timeout:5e3,closeOnClick:!0};function d({message:t,id:e,showOnHidden:n,...o}){if(e){const t=l()(`.flash-${e}`);t.length&&r().hide({transitionOut:"fadeOutUp"},t[0])}if(n||!document.hidden)return r().success({message:t,...u,...o})}function f(t){const{message:e,timeout:n,id:o,showOnHidden:r,...a}=t,c=`flash-${o||s()()}`,u=`.${c}`;if(!t.timeout||!r&&document.hidden)return;let f;d({message:`${e} <span class="js-izitoast__countdown u-color-green"> (${n/1e3})</span>`,timeout:n,id:o,...a,class:c});const h=n===i.hj,p=n/1e3;let m=p;const g=h?5:p/2,w=h?10:p/6;f=setInterval((function(){if(m<=0||!l()(u).length)return void clearInterval(f);const t=l()(u).find(".iziToast-message");let e="green";m<g?e="red":m<w&&(e="yellow"),t.find(".js-izitoast__countdown").remove(),t.append(`<span class="js-izitoast__countdown u-color-${e}"> (${m})</span>`),m--}),1e3)}function h({message:t,id:e,showOnHidden:n,...o}){if(e){const t=l()(`.flash-${e}`);t.length&&r().hide({transitionOut:"fadeOutUp"},t[0])}if(n||!document.hidden)return r().error({message:t,...u,...o})}function p({alertId:t,iconPosition:e,message:n,link:o,icon:i="attention",iconColor:a,img:s,...c}){const l={...u,timeout:4e3,position:"topRight",class:"c-alert",progressBar:!0,...c};l.timeout||(l.progressBar=!1,l.closeOnClick=!1);const d=o?"a":"div",f=`\n    <${d} class="c-alert__inner" ${t?`data-alert-id="${t}"`:""} ${o?`href="${o}"`:""}>\n      ${i||s?`\n    <div class="l-row l-row-gap--xxs">\n      <div class="l-col-auto ${"center"===e?"u-d-flex u-align-items-center":""}">\n        ${s?`\n          <img src="${s}" class="c-alert__img" />\n        `:`\n          <span class="c-icon c-icon--${i} c-alert__icon ${a?`u-color-${a}`:""}"></span>\n        `}\n        \n      </div>\n      <div class="l-col">\n        ${n}\n      </div>\n\n      ${l.timeout?"":'\n          <div class="l-col-auto u-d-flex u-align-items-center">\n            <div class="c-icon c-icon--x c-icon--base c-alert__close u-pointer js-flash-alert__close"></div>\n          </div>\n        '}\n    </div>\n  `:n}\n    </${d}>\n  `;return l.timeout&&m(t),r().success({message:f,...l})}function m(t,e=!0){const n=Math.floor(2501*Math.random()+500),o=()=>fetch("/api/alerts/mark_as_viewed",{method:"POST",headers:{"x-csrf-token":(0,i.PE)(),"content-type":"application/json"},body:JSON.stringify({id:t}),credentials:"same-origin"}).then((t=>t.json()));e?setTimeout(o,n):o()}window.flashAlert=p,l()(document).ready((function(){l()(document).on("click",".js-flash-alert__close",(function(){const t=l()(this).closest("[data-alert-id]").data("alertId");t&&m(t,!1),r().hide({transitionOut:"fadeOutUp"},l()(this).closest(".iziToast")[0])}))}))},3283:function(){},8338:function(){},5899:function(){}}]);
//# sourceMappingURL=9935-108a3126bdec607f7de0.js.map